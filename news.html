<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Notícias - GT IoT EDU</title>
  <meta name="description" content="Últimas notícias e publicações do GT IoT EDU" />

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind Play CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide (ícones SVG) -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Seus ajustes extras -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-slate-900 text-white font-[Inter]">
  <!-- NAV -->
  <nav class="flex items-center justify-between px-6 py-4 bg-slate-900/95 backdrop-blur-sm fixed w-full top-0 z-50 border-b border-slate-800">
    <a href="index.html" class="flex items-center space-x-2">
      <div class="relative">
        <i data-lucide="wifi" class="w-8 h-8 text-blue-400"></i>
        <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
      </div>
      <span class="text-xl font-bold">GT IoT EDU</span>
    </a>

    <div class="hidden md:flex items-center space-x-8">
      <a href="index.html#contexto"   class="hover:text-blue-400 transition-colors">Contexto</a>
      <a href="index.html#proposta"   class="hover:text-blue-400 transition-colors">Proposta</a>
      <a href="index.html#tecnologias" class="hover:text-blue-400 transition-colors">Tecnologias</a>
      <a href="index.html#parceria"   class="hover:text-blue-400 transition-colors">Parceria RNP</a>
      <a href="index.html#apoio"      class="hover:text-blue-400 transition-colors">Apoio</a>
      <a href="index.html#equipe"     class="hover:text-blue-400 transition-colors">Equipe</a>
      <a href="news.html"   class="text-blue-400 font-semibold">Notícias</a>
    </div>

    <div class="flex items-center space-x-4">
      <a href="index.html" class="px-4 py-2 rounded-lg border border-slate-600 text-white hover:bg-slate-800 bg-transparent">Voltar ao Início</a>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section class="pt-32 pb-16 px-6 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden">
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-transparent to-transparent"></div>

    <div class="max-w-6xl mx-auto text-center relative z-10">
      <span class="inline-flex items-center mb-8 bg-blue-600/20 text-blue-300 border border-blue-500/30 px-4 py-2 rounded-lg">
        <i data-lucide="newspaper" class="w-4 h-4 mr-2"></i>
        Últimas Atualizações
        <span class="w-2 h-2 bg-green-400 rounded-full ml-2 animate-pulse"></span>
      </span>

      <h1 class="text-5xl md:text-7xl font-extrabold mb-8 leading-tight">
        <span class="text-white">Notícias e</span><br />
        <span class="bg-gradient-to-r from-blue-400 via-green-400 to-blue-600 bg-clip-text text-transparent">Publicações</span>
      </h1>

      <p class="text-xl md:text-2xl text-slate-300 mb-12 max-w-4xl mx-auto leading-relaxed">
        Acompanhe as últimas novidades, publicações acadêmicas e conquistas do projeto GT IoT EDU
      </p>
    </div>
  </section>

  <!-- NEWS SECTION -->
  <section class="py-16 px-6 bg-slate-800">
    <div class="max-w-6xl mx-auto">
      <!-- Loading State -->
      <div id="loading-state" class="text-center py-12">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400"></div>
        <p class="text-slate-400 mt-4">Carregando notícias...</p>
      </div>

      <!-- News Container -->
      <div id="news-container" class="space-y-6 hidden"></div>

      <!-- Empty State -->
      <div id="empty-state" class="text-center py-12 hidden">
        <i data-lucide="inbox" class="w-16 h-16 text-slate-600 mx-auto mb-4"></i>
        <p class="text-slate-400">Nenhuma notícia encontrada</p>
      </div>

      <!-- Error State -->
      <div id="error-state" class="text-center py-12 hidden">
        <i data-lucide="alert-circle" class="w-16 h-16 text-red-400 mx-auto mb-4"></i>
        <p class="text-slate-400">Erro ao carregar notícias. Tente novamente mais tarde.</p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-8 px-6 bg-slate-900 border-t border-slate-700">
    <div class="max-w-6xl mx-auto text-center">
      <div class="flex items-center justify-center space-x-2 mb-4">
        <div class="relative">
          <i data-lucide="wifi" class="h-6 w-6 text-blue-400"></i>
          <div class="absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
        </div>
        <span class="text-lg font-bold">GT IoT EDU</span>
      </div>
      <p class="text-slate-400 text-sm">
        © 2025 GT-IoTEDU — Todos os direitos reservados.
      </p>
    </div>
  </footer>

  <script>
    // Configuração de esquemas de cores
    const colorSchemes = {
      blue: {
        gradient: 'from-blue-900/50 to-blue-800/30',
        border: 'border-blue-700/50',
        iconBg: 'bg-blue-600/20',
        iconColor: 'text-blue-400',
        tagBg: 'bg-blue-600/30',
        tagText: 'text-blue-300',
        tagBorder: 'border-blue-500/40',
        hoverText: 'hover:text-blue-400',
        linkText: 'text-blue-400'
      },
      green: {
        gradient: 'from-green-900/50 to-green-800/30',
        border: 'border-green-700/50',
        iconBg: 'bg-green-600/20',
        iconColor: 'text-green-400',
        tagBg: 'bg-green-600/30',
        tagText: 'text-green-300',
        tagBorder: 'border-green-500/40',
        hoverText: 'hover:text-green-400',
        linkText: 'text-green-400'
      },
      purple: {
        gradient: 'from-purple-900/50 to-purple-800/30',
        border: 'border-purple-700/50',
        iconBg: 'bg-purple-600/20',
        iconColor: 'text-purple-400',
        tagBg: 'bg-purple-600/30',
        tagText: 'text-purple-300',
        tagBorder: 'border-purple-500/40',
        hoverText: 'hover:text-purple-400',
        linkText: 'text-purple-400'
      },
      orange: {
        gradient: 'from-orange-900/50 to-orange-800/30',
        border: 'border-orange-700/50',
        iconBg: 'bg-orange-600/20',
        iconColor: 'text-orange-400',
        tagBg: 'bg-orange-600/30',
        tagText: 'text-orange-300',
        tagBorder: 'border-orange-500/40',
        hoverText: 'hover:text-orange-400',
        linkText: 'text-orange-400'
      },
      teal: {
        gradient: 'from-teal-900/50 to-teal-800/30',
        border: 'border-teal-700/50',
        iconBg: 'bg-teal-600/20',
        iconColor: 'text-teal-400',
        tagBg: 'bg-teal-600/30',
        tagText: 'text-teal-300',
        tagBorder: 'border-teal-500/40',
        hoverText: 'hover:text-teal-400',
        linkText: 'text-teal-400'
      }
    };

    const tagColors = {
      green: { bg: 'bg-green-600/30', text: 'text-green-300', border: 'border-green-500/40' },
      purple: { bg: 'bg-purple-600/30', text: 'text-purple-300', border: 'border-purple-500/40' },
      blue: { bg: 'bg-blue-600/30', text: 'text-blue-300', border: 'border-blue-500/40' },
      teal: { bg: 'bg-teal-600/30', text: 'text-teal-300', border: 'border-teal-500/40' },
      slate: { bg: 'bg-slate-600/30', text: 'text-slate-300', border: 'border-slate-500/40' }
    };

    // Função para criar HTML de uma notícia
    function createNewsArticle(article) {
      const scheme = colorSchemes[article.colorScheme] || colorSchemes.blue;
      
      const tagsHTML = article.tags.map(tag => {
        const tagColor = tagColors[tag.color] || tagColors.blue;
        return `
          <span class="inline-flex items-center ${tagColor.bg} ${tagColor.text} border ${tagColor.border} px-3 py-1 rounded-lg text-xs font-semibold">
            <i data-lucide="${tag.icon}" class="w-3 h-3 mr-1"></i>
            ${tag.label}
          </span>
        `;
      }).join('');

      return `
        <article class="bg-gradient-to-br ${scheme.gradient} border ${scheme.border} rounded-2xl hover:scale-[1.02] transition-transform">
          <a href="${article.link}" target="_blank" rel="noopener noreferrer" class="block p-8">
            <div class="flex items-start gap-6">
              <div class="w-16 h-16 ${scheme.iconBg} rounded-2xl flex items-center justify-center flex-shrink-0">
                <i data-lucide="${article.icon}" class="w-8 h-8 ${scheme.iconColor}"></i>
              </div>
              <div class="flex-1">
                <div class="flex items-center gap-3 mb-3 flex-wrap">
                  <span class="inline-flex items-center ${scheme.tagBg} ${scheme.tagText} border ${scheme.tagBorder} px-3 py-1 rounded-lg text-xs font-semibold">
                    <i data-lucide="calendar" class="w-3 h-3 mr-1"></i>
                    ${article.dateDisplay}
                  </span>
                  ${tagsHTML}
                </div>
                <h3 class="text-2xl font-bold text-white mb-3 ${scheme.hoverText} transition-colors">
                  ${article.title}
                </h3>
                <p class="text-slate-300 mb-4 leading-relaxed">
                  ${article.description}
                </p>
                <div class="flex items-center ${scheme.linkText}">
                  <span class="text-sm font-semibold mr-2">Ler mais</span>
                  <i data-lucide="external-link" class="w-4 h-4"></i>
                </div>
              </div>
            </div>
          </a>
        </article>
      `;
    }

    // Função para carregar notícias
    async function loadNews() {
      const loadingState = document.getElementById('loading-state');
      const newsContainer = document.getElementById('news-container');
      const emptyState = document.getElementById('empty-state');
      const errorState = document.getElementById('error-state');

      try {
        // Carregar índice
        const indexResponse = await fetch('news/index.json');
        if (!indexResponse.ok) throw new Error('Failed to load index');
        
        const index = await indexResponse.json();
        
        if (!index.articles || index.articles.length === 0) {
          loadingState.classList.add('hidden');
          emptyState.classList.remove('hidden');
          return;
        }

        // Carregar todas as notícias
        const articles = await Promise.all(
          index.articles.map(async (filename) => {
            const response = await fetch(`news/articles/${filename}`);
            if (!response.ok) throw new Error(`Failed to load ${filename}`);
            return response.json();
          })
        );

        // Ordenar por data (mais recentes primeiro)
        articles.sort((a, b) => b.date.localeCompare(a.date));

        // Renderizar notícias
        newsContainer.innerHTML = articles.map(createNewsArticle).join('');
        
        // Mostrar container e esconder loading
        loadingState.classList.add('hidden');
        newsContainer.classList.remove('hidden');

        // Reinicializar ícones Lucide
        if (window.lucide) {
          window.lucide.createIcons();
        }

      } catch (error) {
        console.error('Error loading news:', error);
        loadingState.classList.add('hidden');
        errorState.classList.remove('hidden');
      }
    }

    // Inicializar quando o DOM estiver pronto
    document.addEventListener('DOMContentLoaded', () => {
      // Inicializar ícones Lucide
      if (window.lucide) {
        window.lucide.createIcons();
      }
      
      // Carregar notícias
      loadNews();
    });
  </script>
</body>
</html>